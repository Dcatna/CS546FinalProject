<div class="profile-container">
  <div class="profile-header">
    <form id="profileImageForm" action="/profile/upload" method="POST" enctype="multipart/form-data">
      <div class="profile-picture-section" id="profilePictureClickable">
        <img
          src="/profile/image/{{userId}}"
          alt="Profile Picture"
          class="profile-picture"
          onerror="this.onerror=null; this.src='/public/user_default.jpg';"
        />
        <input
          type="file"
          id="profileImageInput"
          name="profileImage"
          accept="image/*"
          style="display: none;"
        />
      </div>
    </form>
    <div class="profile-info">
      <h2><strong>Name:</strong> {{firstName}} {{lastName}}</h2>
      <p><strong>User ID:</strong> {{userId}}</p>
      <p><strong>Joined:</strong> {{createdAt}}</p>
    </div>
  </div>

  {{#if isOwner}}
    <div class="owner-controls">
      <form action="/profile/toggle-privacy" method="POST" class="privacy-toggle-form">
        <label class="privacy-switch">
          <input type="checkbox" name="public" value="on" onchange="setTimeout(() => this.form.submit(), 10)" {{#if public}}checked{{/if}} />        
          <span class="slider"></span>
        </label>
        <span class="privacy-label">
          {{#if public}}
            Your profile is <strong>Public</strong>
          {{else}}
            Your profile is <strong>Private</strong>
          {{/if}}
        </span>
      </form>

      <form action="/logout" method="POST" class="signout-form">
        <button type="submit" class="signout-button">Sign Out</button>
      </form>
    </div>
  {{/if}}


  <div class="profile-tabs">
    <button class="active">Schedules</button>
    <button>Comments</button>
  </div>

  <div class="profile-content">
    <h3>Schedules:</h3>
    <ul>
      {{#each schedules}}
        <li>{{this}}</li>
      {{/each}}
    </ul>
  </div>
</div>
